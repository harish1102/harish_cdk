
----
# Pseudo-code to check for a tag in a PR description or commit message
TAG_TO_CHECK="yourTag"
PR_ID=$(system.pullRequest.pullRequestId)
TAG_FOUND=$(call Azure DevOps REST API to get PR details and check for TAG_TO_CHECK)

if [ "$TAG_FOUND" = "true" ]; then
    echo "Tag found, continuing pipeline..."
else
    echo "Tag not found, stopping pipeline..."
    exit 1 # or use Azure DevOps REST API to cancel the run
fi

----
trigger:
- main

pr:
- main

pool:
  vmImage: 'ubuntu-latest'

steps:
- script: |
    echo "Checking PR title for specific criteria..."
    PR_TITLE=$(curl -s -H "Authorization: Bearer $(System.AccessToken)" "https://dev.azure.com/{organization}/{project}/_apis/git/repositories/{repositoryId}/pullRequests/$(System.PullRequest.PullRequestId)?api-version=6.0" | jq -r '.title')
    echo "PR Title: $PR_TITLE"
    if [[ "$PR_TITLE" == *"specific criteria"* ]]; then
      echo "Criteria met, continuing pipeline..."
    else
      echo "Criteria not met, skipping pipeline..."
      exit 1 # or any other way to skip or end the pipeline
    fi
  displayName: 'Check PR Title'
  env:
    System.AccessToken: $(System.AccessToken)

# Your other pipeline steps would go here
----
